三次握手：  
第一次A向B发送一个同步序列标志位（SYN =1）和随机生成的值seq=J，这是第一次握手。  
B拿到A传过来的seq=J，把这个值加1，放到小写的ack=J+1里,给A传SYN=1，ACK=1(确认标识),和B随机生成的值seq=K。这是第二次握手  
A拿到B的返回的ack=J+1，校验返回的ack是不是等于J+1,是的话把b返回的k,也加1，塞进ack=k+1 ，和ACK=1发送给B，这样一次tcp连接的三次握手就完成了  
四次挥手:
由于Tcp连接是全双工的，也就是说发送方和接收方都有一条连接，那么关闭TCP的时候就要关闭A到b的连接和b到a的连接  
第一次挥手，A向B发送一条FIN=随机数M 断开连接标识  
第二次挥手，B收到A的fin后，发送一条ack=M+1标识和告诉A已经收到了，这时候A到B的连接就已经关闭了  
第三次挥手，B向A也发送一条FIN = 随机数N标识  
第四次挥手，A收到B的Fin后，也发送一条ack=N+1标识告诉B已经收到了，这时候B到A的连接也关闭了。这样经过四次挥手，tcp的双向连接就关闭了。
      